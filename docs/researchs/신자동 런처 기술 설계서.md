# 신자동 런처(Shin-Jadong Launcher) 기술 설계서

**버전**: v1.0
**작성일**: 2025-12-20
**작성자**: CareOn 기술팀
**상태**: Draft

---

## 1. 개요

### 1.1 프로젝트 목적

**"질문에 답하면 웹사이트, 앱, 블로그가 한 번에 생성되는 SaaS"**

예비 창업자가 개발 지식 없이도:
1. 온보딩 질문에 답변 (5-10분)
2. 즉시 웹사이트 + 블로그 + 상세기획서 생성
3. 케어온 하드웨어(CCTV/POS) 연동 시 평생 무료

### 1.2 비즈니스 모델

```
┌─────────────────────────────────────────────────────────────────┐
│                    신자동 → 케어온 파이프라인                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [유입]          [전환]              [락인]           [확장]     │
│                                                                 │
│  바이브코딩     질문폭격 SaaS        케어온 H/W      프랜차이즈   │
│  유튜브/블로그  "창업ON케어"         CCTV/POS/인터넷  본사 솔루션 │
│       ↓              ↓                   ↓              ↓       │
│   무료 가치      무료 웹/앱          월 구독료        연 계약    │
│   (신뢰 획득)   (데이터 획득)       (현금흐름)       (독점 계약) │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 1.3 타겟 사용자

| 페르소나 | 니즈 | 제공 가치 |
|---------|------|----------|
| 예비 창업자 | 홈페이지 필요, 개발 모름 | 질문만 답하면 완성 |
| 소상공인 | 마케팅 자동화 | 블로그 자동 포스팅 |
| 프랜차이즈 본사 | 가맹점 관리 시스템 | 멀티테넌트 앱 |

---

## 2. 기술 아키텍처

### 2.1 기반 기술 스택

| 영역 | 기술 | 용도 |
|------|------|------|
| **CMS/Backend** | PayloadCMS 3.x | 멀티테넌트 데이터 관리 |
| **Frontend** | Next.js 15 (App Router) | SSR/ISR 웹사이트 |
| **Database** | MongoDB | 문서형 데이터 저장 |
| **Storage** | Vercel Blob | 이미지/미디어 저장 |
| **Payment** | Stripe | 구독 결제 |
| **Auth** | Payload Auth | 사용자 인증 |

### 2.2 기존 코드베이스 활용

PayloadCMS 공식 웹사이트 레포지토리를 포크하여 재사용:

```
[기존 Payload Cloud 구조]              [신자동 런처 변환]

/new (프로젝트 생성)          →        /onboarding (질문 위자드)
/cloud/[team-slug]            →        /dashboard/[site-slug]
/cloud/[team]/[project]       →        /sites/[tenant]/[site]
Templates (개발자 템플릿)      →        BusinessTemplates (업종별)
```

### 2.3 시스템 흐름도

```
┌──────────────────────────────────────────────────────────────────────┐
│                           사용자 여정                                 │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  1. 랜딩페이지 진입                                                   │
│         ↓                                                            │
│  2. 온보딩 시작 (회원가입/로그인)                                      │
│         ↓                                                            │
│  3. 질문 폭격 (Step 1~5)                                              │
│      ├─ Step 1: 업종 선택 (고기집/카페/프랜차이즈)                     │
│      ├─ Step 2: 기본 정보 (상호명, 위치)                              │
│      ├─ Step 3: 브랜딩 (컬러, 분위기)                                 │
│      ├─ Step 4: 타겟 & 메뉴                                          │
│      └─ Step 5: 추가 기능 (배달, 예약)                                │
│         ↓                                                            │
│  4. config.json 생성 (AI 또는 템플릿 기반)                            │
│         ↓                                                            │
│  5. 결과물 생성                                                       │
│      ├─ 웹사이트 (Vercel 배포)                                        │
│      ├─ 블로그 초안 (첫 포스팅)                                       │
│      └─ 상세기획서 (PDF)                                              │
│         ↓                                                            │
│  6. 대시보드 (관리/수정)                                              │
│         ↓                                                            │
│  7. 케어온 CTA                                                        │
│      "CCTV/POS 연동하면 평생 무료!"                                   │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
```

---

## 3. 데이터 모델

### 3.1 Payload Collections

#### 3.1.1 Tenants (사업자/가맹점)

```typescript
// src/collections/Tenants.ts
export const Tenants: CollectionConfig = {
  slug: 'tenants',
  admin: {
    useAsTitle: 'businessName',
    group: '신자동',
  },
  fields: [
    // === 기본 정보 ===
    {
      name: 'businessName',
      type: 'text',
      required: true,
      label: '상호명',
    },
    {
      name: 'businessType',
      type: 'select',
      required: true,
      label: '업종',
      options: [
        { label: '고기집/정육점', value: 'meat' },
        { label: '카페/디저트', value: 'cafe' },
        { label: '한식', value: 'korean' },
        { label: '일식', value: 'japanese' },
        { label: '중식', value: 'chinese' },
        { label: '양식', value: 'western' },
        { label: '프랜차이즈 본사', value: 'franchise_hq' },
        { label: '기타', value: 'other' },
      ],
    },
    {
      name: 'ownerName',
      type: 'text',
      label: '대표자명',
    },
    {
      name: 'phone',
      type: 'text',
      label: '연락처',
    },
    {
      name: 'email',
      type: 'email',
      label: '이메일',
    },

    // === 위치 정보 ===
    {
      name: 'location',
      type: 'group',
      label: '위치 정보',
      fields: [
        { name: 'address', type: 'text', label: '주소' },
        { name: 'city', type: 'text', label: '시/군/구' },
        { name: 'district', type: 'text', label: '동/읍/면' },
        { name: 'coordinates', type: 'point', label: '좌표' },
      ],
    },

    // === 브랜딩 ===
    {
      name: 'branding',
      type: 'group',
      label: '브랜딩',
      fields: [
        {
          name: 'primaryColor',
          type: 'text',
          label: '메인 컬러',
          admin: { description: 'HEX 코드 (예: #FF5733)' },
        },
        {
          name: 'secondaryColor',
          type: 'text',
          label: '보조 컬러',
        },
        {
          name: 'vibe',
          type: 'select',
          label: '분위기',
          options: [
            { label: '친근한/캐주얼', value: 'casual' },
            { label: '고급스러운/프리미엄', value: 'premium' },
            { label: '전통적인/정통', value: 'traditional' },
            { label: '모던/트렌디', value: 'modern' },
          ],
        },
        {
          name: 'logo',
          type: 'upload',
          relationTo: 'media',
          label: '로고',
        },
      ],
    },

    // === 타겟 & 메뉴 ===
    {
      name: 'targetCustomer',
      type: 'textarea',
      label: '타겟 고객',
      admin: { description: '예: 30-40대 직장인, 가족 단위 손님' },
    },
    {
      name: 'signatureMenu',
      type: 'array',
      label: '시그니처 메뉴',
      fields: [
        { name: 'name', type: 'text', label: '메뉴명' },
        { name: 'price', type: 'number', label: '가격' },
        { name: 'description', type: 'textarea', label: '설명' },
        { name: 'image', type: 'upload', relationTo: 'media' },
      ],
    },

    // === 기능 옵션 ===
    {
      name: 'features',
      type: 'group',
      label: '기능 옵션',
      fields: [
        { name: 'delivery', type: 'checkbox', label: '배달 가능' },
        { name: 'reservation', type: 'checkbox', label: '예약 기능' },
        { name: 'parking', type: 'checkbox', label: '주차 가능' },
        { name: 'groupBooking', type: 'checkbox', label: '단체 예약' },
      ],
    },

    // === 생성된 결과물 ===
    {
      name: 'generatedConfig',
      type: 'json',
      label: '생성된 Config',
      admin: { readOnly: true },
    },
    {
      name: 'generatedSites',
      type: 'relationship',
      relationTo: 'generated-sites',
      hasMany: true,
      label: '생성된 사이트',
    },

    // === 케어온 연동 ===
    {
      name: 'careOn',
      type: 'group',
      label: '케어온 연동',
      fields: [
        { name: 'subscribed', type: 'checkbox', label: '케어온 구독 여부' },
        { name: 'cctvCount', type: 'number', label: 'CCTV 대수' },
        { name: 'posConnected', type: 'checkbox', label: 'POS 연동' },
        { name: 'contractDate', type: 'date', label: '계약일' },
      ],
    },

    // === 메타 ===
    {
      name: 'user',
      type: 'relationship',
      relationTo: 'users',
      label: '소유자',
      required: true,
    },
    {
      name: 'status',
      type: 'select',
      label: '상태',
      defaultValue: 'onboarding',
      options: [
        { label: '온보딩 중', value: 'onboarding' },
        { label: '활성', value: 'active' },
        { label: '휴면', value: 'dormant' },
        { label: '해지', value: 'cancelled' },
      ],
    },
  ],
}
```

#### 3.1.2 GeneratedSites (생성된 사이트)

```typescript
// src/collections/GeneratedSites.ts
export const GeneratedSites: CollectionConfig = {
  slug: 'generated-sites',
  admin: {
    useAsTitle: 'name',
    group: '신자동',
  },
  fields: [
    {
      name: 'name',
      type: 'text',
      required: true,
      label: '사이트명',
    },
    {
      name: 'tenant',
      type: 'relationship',
      relationTo: 'tenants',
      required: true,
      label: '소속 사업자',
    },
    {
      name: 'type',
      type: 'select',
      required: true,
      label: '사이트 유형',
      options: [
        { label: '웹사이트', value: 'website' },
        { label: '블로그', value: 'blog' },
        { label: '앱', value: 'app' },
        { label: '랜딩페이지', value: 'landing' },
      ],
    },
    {
      name: 'template',
      type: 'relationship',
      relationTo: 'business-templates',
      label: '사용 템플릿',
    },
    {
      name: 'config',
      type: 'json',
      label: '사이트 설정',
    },
    {
      name: 'deploymentUrl',
      type: 'text',
      label: '배포 URL',
    },
    {
      name: 'customDomain',
      type: 'text',
      label: '커스텀 도메인',
    },
    {
      name: 'status',
      type: 'select',
      label: '상태',
      defaultValue: 'building',
      options: [
        { label: '빌드 중', value: 'building' },
        { label: '배포됨', value: 'deployed' },
        { label: '오류', value: 'error' },
        { label: '중지됨', value: 'stopped' },
      ],
    },
    {
      name: 'analytics',
      type: 'group',
      label: '분석 데이터',
      fields: [
        { name: 'pageViews', type: 'number', label: '페이지뷰' },
        { name: 'visitors', type: 'number', label: '방문자수' },
        { name: 'lastUpdated', type: 'date', label: '마지막 업데이트' },
      ],
    },
  ],
}
```

#### 3.1.3 BusinessTemplates (업종별 템플릿)

```typescript
// src/collections/BusinessTemplates.ts
export const BusinessTemplates: CollectionConfig = {
  slug: 'business-templates',
  admin: {
    useAsTitle: 'name',
    group: '신자동',
  },
  fields: [
    {
      name: 'name',
      type: 'text',
      required: true,
      label: '템플릿명',
    },
    {
      name: 'slug',
      type: 'text',
      required: true,
      unique: true,
    },
    {
      name: 'businessType',
      type: 'select',
      required: true,
      label: '업종',
      options: [
        { label: '고기집', value: 'meat' },
        { label: '카페', value: 'cafe' },
        { label: '한식', value: 'korean' },
        { label: '프랜차이즈', value: 'franchise' },
        // ... 기타 업종
      ],
    },
    {
      name: 'description',
      type: 'textarea',
      label: '설명',
    },
    {
      name: 'previewImage',
      type: 'upload',
      relationTo: 'media',
      label: '미리보기 이미지',
    },
    {
      name: 'baseConfig',
      type: 'json',
      label: '기본 설정 (JSON)',
      admin: { description: '템플릿의 기본 config.json 구조' },
    },
    {
      name: 'components',
      type: 'array',
      label: '포함 컴포넌트',
      fields: [
        { name: 'name', type: 'text' },
        { name: 'type', type: 'select', options: [
          { label: 'Hero 섹션', value: 'hero' },
          { label: '메뉴 목록', value: 'menu' },
          { label: '갤러리', value: 'gallery' },
          { label: '위치/지도', value: 'location' },
          { label: '리뷰', value: 'reviews' },
          { label: '연락처', value: 'contact' },
          { label: '예약 폼', value: 'reservation' },
        ]},
      ],
    },
    {
      name: 'gitRepo',
      type: 'text',
      label: 'Git Repository URL',
    },
    {
      name: 'order',
      type: 'number',
      label: '정렬 순서',
    },
  ],
}
```

#### 3.1.4 OnboardingQuestions (온보딩 질문)

```typescript
// src/collections/OnboardingQuestions.ts
export const OnboardingQuestions: CollectionConfig = {
  slug: 'onboarding-questions',
  admin: {
    useAsTitle: 'question',
    group: '신자동',
  },
  fields: [
    {
      name: 'step',
      type: 'number',
      required: true,
      label: '스텝 번호',
    },
    {
      name: 'question',
      type: 'text',
      required: true,
      label: '질문',
    },
    {
      name: 'questionType',
      type: 'select',
      required: true,
      label: '질문 유형',
      options: [
        { label: '텍스트 입력', value: 'text' },
        { label: '선택형', value: 'select' },
        { label: '다중 선택', value: 'multiselect' },
        { label: '이미지 업로드', value: 'image' },
        { label: '컬러 선택', value: 'color' },
        { label: '예/아니오', value: 'boolean' },
      ],
    },
    {
      name: 'options',
      type: 'array',
      label: '선택지',
      admin: { condition: (data) => ['select', 'multiselect'].includes(data.questionType) },
      fields: [
        { name: 'label', type: 'text' },
        { name: 'value', type: 'text' },
        { name: 'icon', type: 'text' },
      ],
    },
    {
      name: 'targetField',
      type: 'text',
      required: true,
      label: '매핑 필드',
      admin: { description: 'Tenant 컬렉션의 필드명 (예: branding.primaryColor)' },
    },
    {
      name: 'helpText',
      type: 'textarea',
      label: '도움말',
    },
    {
      name: 'required',
      type: 'checkbox',
      label: '필수 여부',
      defaultValue: true,
    },
    {
      name: 'order',
      type: 'number',
      label: '순서',
    },
  ],
}
```

---

## 4. 온보딩 질문 설계 (질문 폭격)

### 4.1 Phase 1: 가면의 질문 (창업자가 신나서 대답할 질문)

| Step | 질문 | 유형 | 매핑 필드 | 의도 |
|------|------|------|----------|------|
| 1-1 | 어떤 꿈을 꾸고 계신가요? | select | businessType | 업종 파악 |
| 1-2 | 가게 이름은 정하셨나요? | text | businessName | 상호명 |
| 1-3 | 아직 이름이 없다면 AI가 지어드릴까요? | boolean | - | 부가 기능 노출 |

### 4.2 Phase 2: 브랜딩 질문

| Step | 질문 | 유형 | 매핑 필드 | 의도 |
|------|------|------|----------|------|
| 2-1 | 가게 분위기는 어떤 느낌인가요? | select | branding.vibe | 디자인 톤 |
| 2-2 | 메인 컬러를 선택해주세요 | color | branding.primaryColor | 브랜드 컬러 |
| 2-3 | 로고가 있으신가요? | image | branding.logo | 로고 업로드 |

### 4.3 Phase 3: 타겟 & 메뉴

| Step | 질문 | 유형 | 매핑 필드 | 의도 |
|------|------|------|----------|------|
| 3-1 | 주 타겟 고객은 누구인가요? | multiselect | targetCustomer | 블로그 톤 설정 |
| 3-2 | 시그니처 메뉴(무기)는 무엇인가요? | array | signatureMenu | 랜딩 메인 섹션 |

### 4.4 Phase 4: 목마의 질문 (영업 정보 수집)

| Step | 질문 | 유형 | 매핑 필드 | 의도 |
|------|------|------|----------|------|
| 4-1 | 오픈 예정일은 언제인가요? | date | - | CCTV/POS 설치 타이밍 |
| 4-2 | 매장 평수와 층수는? | text | - | CCTV 대수 산출 |
| 4-3 | 가게 위치(주소)는 어디인가요? | text | location.address | 지도 표시 |

### 4.5 Phase 5: 학살의 질문 (케어온 락인)

| Step | 질문 | 유형 | 매핑 필드 | 의도 |
|------|------|------|----------|------|
| 5-1 | 배달도 하실 계획인가요? | boolean | features.delivery | 프리미엄 POS 추천 |
| 5-2 | 블로그 글, 매일 쓰기 귀찮지 않으세요? | boolean | - | 자동화 기능 노출 |
| 5-3 | 이 모든 시스템을 월 0원에 쓰시겠습니까? | CTA | - | 케어온 연결 |

---

## 5. Config.json 스키마

### 5.1 생성되는 config.json 구조

```json
{
  "version": "1.0",
  "tenant": {
    "id": "tenant_abc123",
    "businessName": "강남 프리미엄 한우",
    "businessType": "meat"
  },
  "branding": {
    "primaryColor": "#8B0000",
    "secondaryColor": "#FFD700",
    "vibe": "premium",
    "logo": "/uploads/logo_abc123.png"
  },
  "content": {
    "hero": {
      "title": "강남 프리미엄 한우",
      "subtitle": "1++ 한우만 고집합니다",
      "backgroundImage": "/uploads/hero_bg.jpg",
      "cta": {
        "text": "예약하기",
        "link": "#reservation"
      }
    },
    "menu": [
      {
        "name": "한우 꽃등심",
        "price": 89000,
        "description": "입에서 살살 녹는 1++ 꽃등심",
        "image": "/uploads/menu_1.jpg"
      }
    ],
    "about": {
      "title": "30년 전통의 맛",
      "description": "...",
      "images": []
    },
    "location": {
      "address": "서울시 강남구 테헤란로 123",
      "coordinates": { "lat": 37.5, "lng": 127.0 },
      "phone": "02-123-4567",
      "hours": "11:00 - 22:00"
    },
    "reservation": {
      "enabled": true,
      "link": "https://naver.me/abc123"
    }
  },
  "features": {
    "blog": {
      "enabled": true,
      "autoPost": true,
      "frequency": "weekly"
    },
    "delivery": false,
    "reservation": true
  },
  "integrations": {
    "careOn": {
      "subscribed": false,
      "cctvCount": 0,
      "posConnected": false
    },
    "analytics": {
      "googleAnalytics": "",
      "naverAnalytics": ""
    }
  },
  "deployment": {
    "url": "https://gangnam-hanwoo.shinjadong.com",
    "customDomain": "",
    "ssl": true
  },
  "meta": {
    "createdAt": "2025-12-20T00:00:00Z",
    "updatedAt": "2025-12-20T00:00:00Z",
    "generatedBy": "onboarding-wizard-v1"
  }
}
```

---

## 6. 프론트엔드 구조

### 6.1 라우트 구조

```
src/app/(frontend)/(launcher)/
├── layout.tsx                    # 런처 레이아웃
├── page.tsx                      # 랜딩 페이지 (마케팅)
├── onboarding/
│   ├── layout.tsx                # 온보딩 레이아웃 (프로그레스 바)
│   ├── page.tsx                  # 온보딩 시작 (업종 선택)
│   ├── [step]/
│   │   └── page.tsx              # 동적 스텝 페이지
│   └── complete/
│       └── page.tsx              # 완료 & 결과 미리보기
├── dashboard/
│   ├── layout.tsx                # 대시보드 레이아웃
│   ├── page.tsx                  # 내 사이트 목록
│   └── [site-slug]/
│       ├── page.tsx              # 사이트 상세
│       ├── edit/page.tsx         # 사이트 수정
│       ├── analytics/page.tsx    # 분석
│       └── settings/page.tsx     # 설정
├── templates/
│   ├── page.tsx                  # 템플릿 갤러리
│   └── [template-slug]/
│       └── page.tsx              # 템플릿 상세
└── pricing/
    └── page.tsx                  # 요금제 (케어온 CTA)
```

### 6.2 핵심 컴포넌트

```
src/components/
├── Launcher/
│   ├── OnboardingWizard/
│   │   ├── index.tsx             # 메인 위자드 컨테이너
│   │   ├── ProgressBar.tsx       # 상단 진행률
│   │   ├── StepContainer.tsx     # 스텝 래퍼
│   │   ├── QuestionRenderer.tsx  # 질문 유형별 렌더러
│   │   ├── steps/
│   │   │   ├── BusinessTypeStep.tsx
│   │   │   ├── BrandingStep.tsx
│   │   │   ├── MenuStep.tsx
│   │   │   └── FeaturesStep.tsx
│   │   └── hooks/
│   │       ├── useOnboarding.ts  # 온보딩 상태 관리
│   │       └── useConfigGenerator.ts # config 생성
│   ├── Dashboard/
│   │   ├── SiteCard.tsx
│   │   ├── SiteList.tsx
│   │   └── QuickActions.tsx
│   ├── TemplateGallery/
│   │   ├── TemplateCard.tsx
│   │   └── TemplatePreview.tsx
│   └── CareOnCTA/
│       ├── Banner.tsx            # 케어온 배너
│       └── Modal.tsx             # 연동 모달
```

---

## 7. API 설계

### 7.1 REST Endpoints

```
POST   /api/tenants                    # 테넌트 생성
GET    /api/tenants/:id                # 테넌트 조회
PATCH  /api/tenants/:id                # 테넌트 수정

POST   /api/onboarding/start           # 온보딩 시작
POST   /api/onboarding/step            # 스텝 저장
POST   /api/onboarding/complete        # 온보딩 완료 & 사이트 생성

POST   /api/sites/generate             # 사이트 생성
GET    /api/sites/:id                  # 사이트 조회
POST   /api/sites/:id/deploy           # 사이트 배포
POST   /api/sites/:id/preview          # 미리보기 생성

GET    /api/templates                  # 템플릿 목록
GET    /api/templates/:slug            # 템플릿 상세

POST   /api/careon/connect             # 케어온 연동
GET    /api/careon/status              # 연동 상태 확인
```

### 7.2 Config Generator API

```typescript
// POST /api/onboarding/complete
interface OnboardingCompleteRequest {
  tenantId: string
  answers: Record<string, any>  // 질문 답변들
  templateSlug: string
}

interface OnboardingCompleteResponse {
  success: boolean
  config: SiteConfig
  previewUrl: string
  sites: {
    website: { id: string, url: string }
    blog?: { id: string, url: string }
  }
  documents: {
    businessPlan: string  // PDF URL
  }
}
```

---

## 8. 개발 로드맵

### Phase 1: MVP (2주)

| 주차 | 태스크 | 산출물 |
|-----|--------|--------|
| 1주차 | Collections 생성, 온보딩 UI 스켈레톤 | DB 스키마, 기본 UI |
| 2주차 | Config 생성 로직, 템플릿 1개 | 작동하는 MVP |

### Phase 2: 확장 (2주)

| 주차 | 태스크 | 산출물 |
|-----|--------|--------|
| 3주차 | 템플릿 3개 추가, 블로그 자동화 | 업종별 템플릿 |
| 4주차 | 대시보드, 케어온 CTA | 완성된 SaaS |

### Phase 3: 마케팅 (지속)

- 바이브코딩 유튜브 콘텐츠
- 네이버 블로그 SEO
- 정부 지원사업 제안서

---

## 9. 기술적 고려사항

### 9.1 성능

- ISR (Incremental Static Regeneration) 활용
- 이미지 최적화 (next/image + Vercel Blob)
- Edge Functions for 빠른 응답

### 9.2 확장성

- 멀티테넌트 아키텍처 (tenant_id 기반 격리)
- 템플릿 시스템 (새 업종 추가 용이)
- 플러그인 구조 (기능 모듈화)

### 9.3 보안

- Payload Auth 기반 인증
- API Rate Limiting
- 테넌트 간 데이터 격리

---

## 10. 부록

### 10.1 용어 정의

| 용어 | 정의 |
|------|------|
| Tenant | 사업자/가맹점 (시스템 사용 주체) |
| Template | 업종별 웹사이트 템플릿 |
| Config | 사이트 생성에 필요한 설정 JSON |
| Onboarding | 질문 폭격을 통한 정보 수집 과정 |

### 10.2 참고 문서

- [CAREON_MASTER_CONTEXT-1.md](./CAREON_MASTER_CONTEXT-1.md)
- [신자동 아키텍처 청사진](./신자동%20아키텍처%20청사진.md)
- [2026년 자본 흐름 부검](./2026년%20자본%20흐름%20부검.md)

---

**문서 끝**
