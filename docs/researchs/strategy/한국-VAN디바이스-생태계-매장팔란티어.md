# 한국 VAN-디바이스 생태계와 "매장 팔란티어" 구축 전략

**CareOn OS가 소상공인 통합 관제의 핵심 플레이어가 되려면, NHN KCP·나이스페이먼츠의 개방형 API를 활용하고, 페이히어·한화비전·슈프리마를 1순위 파트너로 선정해야 한다.** 국내 VAN 시장은 나이스정보통신(27.8%), KICC(14.9%), KSNET(12.6%)이 상위권을 형성하고 있으나, **실제 API 접근성은 PG사(결제대행사)가 VAN사보다 월등히 우수**하다. CCTV는 보안업체(에스원, KT텔레캅)의 폐쇄형 생태계를 피하고 한화비전 WAVE API를 활용해야 하며, 출입통제는 슈프리마의 G-SDK와 REST API가 업계 최고 수준이다. MVP 구축 시 **POS 매출 데이터 → CCTV 영상 연동 → IoT 센서** 순서로 접근하면 6개월 내 핵심 기능 구현이 가능하다.

---

## VAN 시장의 실제 권력 구조는 점유율과 다르다

한국 VAN 시장은 27개 사업자 중 상위 13개가 **98%를 점유**하는 과점 구조다. 나이스정보통신이 연간 **70억 건**, 월 **1,850만 건** 이상의 결제를 처리하며 1위를 유지하고, KICC(이지체크 브랜드), KSNET(월 **1.3억 건** 처리)이 뒤를 잇는다. 그러나 "매장 팔란티어" 관점에서 중요한 건 점유율이 아니라 **API 개방성**이다.

| VAN/PG사 | 시장점유율 | API 공개 | 개발자 포털 | 데이터 접근 |
|----------|-----------|----------|-------------|------------|
| **NHN KCP** | PG 1-2위 | ⭐⭐⭐⭐⭐ | developer.kcp.co.kr | 실시간 REST API |
| **나이스페이먼츠** | VAN 1위 연계 | ⭐⭐⭐⭐⭐ | developers.nicepay.co.kr | 실시간 REST API |
| **토스페이먼츠** | 급성장 | ⭐⭐⭐⭐⭐ | docs.tosspayments.com | 실시간 + 웹훅 |
| **세틀뱅크** | 간편결제 | ⭐⭐⭐ | develop.sbsvc.online | REST API |
| KSNET | 12.6% | ⭐⭐⭐ | 싱크트리 연동 | API + 배치 |
| KICC | 14.9% | ⭐⭐ | 파트너 협업 | 제한적 |
| 스마트로 | 11.6% | ⭐⭐ | 계약 기반 | 제한적 |
| KIS정보통신 | 10.6% | ⭐ | 그룹사 우선 | 매우 제한적 |

핵심 인사이트는 명확하다. **VAN사 직접 연동보다 PG사(KCP, 나이스페이먼츠, 토스페이먼츠) API를 활용**하거나, **포트원(아임포트) 같은 통합 결제 API**를 사용하는 것이 현실적이다. 대부분의 VAN사는 여전히 **DLL 기반 연동**에 의존하며, 신규 POS 개발 시 담당자 이력 관리까지 요구하는 폐쇄적 문화를 유지한다.

---

## POS 하드웨어와 소프트웨어 생태계 매핑

POS 시장은 하드웨어와 소프트웨어가 분리된 구조다. 포스뱅크가 **국내 POS 하드웨어 1위**(코스닥 상장)로 맥도날드, 이디야커피, 투썸플레이스 등에 납품하며 **수출 비중 75%**(80개국)를 기록한다. 소프트웨어 측면에서는 토스플레이스(가맹점 **10만+**)와 페이히어(가맹점 **8만+**)가 급성장 중이다.

### POS 소프트웨어 × VAN 호환성

| POS SW | NICE | KIS | KICC | KSNET | 스마트로 | API 공개 |
|--------|:----:|:---:|:----:|:-----:|:-------:|:--------:|
| **토스플레이스** | ✅ | ⚠️ | ✅ | ✅ | ⚠️ | ⚠️ 협의 필요 |
| **페이히어** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ **오픈 API** |
| OKPOS | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ ASP 연동 |
| 이지포스(KICC) | ⚠️ | ⚠️ | ✅ | ⚠️ | ⚠️ | ⚠️ 파트너 한정 |
| 이카운트 | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ ERP 내부 |

**페이히어가 통합 관제 파트너 1순위인 이유**: 2024년 7월 출시된 **"페이히어 비즈니스"**는 프랜차이즈 본사가 다수 지점의 매출·고객·운영을 실시간 통합 관리할 수 있는 솔루션이다. **오픈 API를 제공**하여 타사 POS와 매출 분석 연동이 가능하고, AI 기반 **3/7/14일 후 품절 예측**, ABC 재고 분석까지 지원한다. 네이버 플레이스 공식 연동, 카페24 쇼핑몰 통합 등 **온오프라인 통합**에도 강점이 있다.

토스플레이스는 "토스 프론트"라는 **세계 최초 POS-키오스크 듀얼모드 단말기**를 보유하고 있어 하드웨어 차별화가 있지만, 자체 생태계가 상대적으로 폐쇄적이어서 토스페이먼츠 오프라인 SDK 협의가 필요하다.

---

## 키오스크 시장은 300개 업체의 춘추전국시대

국내 키오스크 보급 대수는 **약 45만 대**(2022년 NIA 추정)이며, 제조사가 **300개 이상** 난립하는 파편화된 시장이다. 진입장벽이 낮아 매년 수십 개 업체가 신설·폐업을 반복한다. 이 환경에서 **표준화된 API는 존재하지 않으며**, 제조사별 독자 솔루션이 난무한다.

### 키오스크 제조사 × VAN 호환성

| 제조사 | NICE | KIS | KICC | KSNET | 스마트로 | KOCES | API 공개 | 통합 연동 난이도 |
|--------|:----:|:---:|:----:|:-----:|:-------:|:-----:|:--------:|:---------------:|
| **페이히어** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ **공개** | **쉬움** |
| **토스플레이스** | ✅ | ✅ | - | ✅ | - | - | ⚠️ | 보통 |
| **포스뱅크** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ 파트너 | 보통 |
| **하나시스** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ 제한적 | 보통 |
| 오더퀸(비버웍스) | ✅ | ✅ | ✅ | ✅ | ✅ | - | ⚠️ | 보통~어려움 |
| 이지체크(KICC) | - | - | ✅ | - | - | ✅ | ❌ | 어려움 |
| 삼성/LG | 파트너 통해 | 파트너 통해 | 파트너 통해 | 파트너 통해 | 파트너 통해 | 파트너 통해 | ⚠️ 파트너 | 어려움 |

삼성(KM24A, Tizen OS)과 LG(키오스크 핏, webOS)가 대기업 브랜드 파워로 시장에 진입했지만, **독자 OS 기반**이라 외부 연동이 복잡하다. 대기업 협력 프로세스도 중소기업 대비 훨씬 길다.

---

## CCTV는 보안업체를 피하고 한화비전을 선택해야 한다

CCTV 생태계에서 가장 중요한 구분은 **"API 개방형"과 "폐쇄형 서비스"**다. 에스원(삼성 계열), KT텔레캅(기가아이즈), SK쉴더스(ADT캡스)는 **모두 API를 공개하지 않는다**. 이들은 보안 서비스 사업자로서 장비+모니터링을 패키지로 판매하며, 외부 시스템 연동을 원천 차단한다.

| 제조사/서비스 | API/SDK 공개 | 프로토콜 | 연동 난이도 | 매장 특화 기능 |
|--------------|:------------:|:--------:|:-----------:|:--------------:|
| **한화비전** | ✅ WOP SDK, WAVE API | ONVIF, RTSP | ⭐⭐ 쉬움 | Retail Insight (방문객 분석) |
| **아이디스** | ⚠️ 협의 필요 | DirectIP | ⭐⭐⭐ 보통 | IDLA AI 분석 |
| **하이크비전** | ✅ ISAPI | ONVIF, RTSP | ⭐⭐ 쉬움 | 풍부한 AI 기능 |
| 다후아 | ✅ NETSDK | ONVIF | ⭐⭐⭐ 보통 | - |
| 에스원 | ❌ 비공개 | 자체 | ⭐⭐⭐⭐⭐ 불가 | - |
| KT텔레캅 | ❌ 비공개 | 클라우드 | ⭐⭐⭐⭐⭐ 불가 | 기가아이즈 포스뷰(POS 연동) |
| SK쉴더스 | ❌ 비공개 | 클라우드 | ⭐⭐⭐⭐⭐ 불가 | 캡스 뷰가드AI |

**한화비전이 1순위인 이유**: **Wisenet Retail Insight**는 방문객 카운팅, 시간대별 분석, 다매장 통합 리포트를 **Web API로 제공**한다. WOP SDK로 카메라 Edge에서 직접 앱을 실행할 수 있고(서버 불필요), WAVE VMS REST API로 유연한 연동이 가능하다. 국내 기업이라 기술지원이 용이하고, NDAA 규제(미국 국방수권법)를 준수하여 향후 공공기관 납품에도 걸림돌이 없다.

하이크비전은 기술적으로 연동이 쉽지만 **NDAA 규제 대상**으로 미국 정부기관 사용이 금지되어 있고, 국내 공공기관 입찰에서도 제한될 수 있다. 기업 이미지 리스크도 존재한다.

### POS-CCTV 연동 기존 사례

**KT 기가아이즈 포스뷰**가 유일하게 상용화된 국내 사례다. 결제 시점 전/후 1분 영상을 자동 연결하여 거스름돈 미수령, 결제오류, 횡령을 감지한다. 그러나 **KT 기가아이즈 가입 필수**이고 외부 API가 미공개라 벤치마킹만 가능하다.

해외에서는 **Toast POS + DTiQ** 조합이 "매장 팔란티어" 비전과 가장 유사하다. DTiQ는 실시간 비디오와 POS 데이터를 통합 분석하여 손실 방지, 운영 효율화를 지원하며, Toast의 **120+ 서드파티 통합 생태계** 중 핵심 파트너다.

---

## 출입통제는 슈프리마가 압도적 선두

출입통제/근태관리 시장에서 **슈프리마(Suprema)**는 국내 1위, 세계 2위, EMEA 1위를 기록하는 글로벌 리더다. 더 중요한 건 **API/SDK 품질이 업계 최고**라는 점이다.

| 제조사 | API/SDK | 지원 언어 | 클라우드 | 로컬 | 근태관리 | 추천도 |
|--------|:-------:|----------|:--------:|:----:|:--------:|:------:|
| **슈프리마** | ⭐⭐⭐⭐⭐ | C++, C#, Java, Python, Go, Node.js, Android 등 | ✅ | ✅ | ✅ | **MVP 필수** |
| 유니온커뮤니티 | ⭐⭐⭐ | REST API | ✅ | ✅ | ✅ | 차선책 |
| ZKTeco | ⭐⭐⭐ | SDK 다수(일부 유료) | ✅ | ✅ | ✅ | 가성비 |
| 코맥스 | ⭐⭐ | 비공개 | △ | ✅ | △ | 비추천 |
| 아이디스 | ⭐⭐ | 폐쇄적 | - | ✅ | - | 비추천 |

슈프리마의 **G-SDK**는 gRPC 기반으로 **최대 1,000대 장치 연결**을 지원하며, **BioStar 2 API**는 JSON 기반 REST API로 웹 통합이 용이하다. BioStation 3(얼굴인식), BioEntry W3(지문인식) 등 하드웨어 라인업도 완비되어 있다.

---

## IoT 생태계는 표준 프로토콜이 핵심이다

매장용 IoT(조명, 음악, 온도)는 **API 개방성 편차가 극심**하다. 조명은 개방적이고, BGM은 완전 폐쇄적이다.

### 조명/전원 제어 API 현황

| 제품 | API 공개 | 연동 방식 | 연동 난이도 |
|------|:--------:|----------|:-----------:|
| **Philips Hue** | ⭐⭐⭐⭐⭐ | REST API (로컬/클라우드) | 쉬움 |
| **Samsung SmartThings** | ⭐⭐⭐⭐ | Public API, Enterprise API | 쉬움 |
| **LG ThinQ** | ⭐⭐⭐⭐ | 2024.12 전면 개방 | 쉬움 |
| TP-Link Kasa/Tapo | ⭐⭐⭐ | 비공식 python-kasa | 보통 |
| 샤오미/Aqara | ⭐⭐⭐ | Zigbee 기반 | 보통 |

### 매장 BGM은 통합 불가능

비즈멜론, 샵엔 지니, 샵비지엠, FLO 등 **모든 매장 BGM 솔루션이 API를 공개하지 않는다**. 통합 관제 시 앱 자동화(Tasker)나 스마트 플러그를 통한 **하드웨어 레벨 ON/OFF 제어**만 가능하다.

### 온도 모니터링 (HACCP 준수)

식품 매장에서 냉장고 온도 모니터링은 필수다. **라디오노드(RadioNode365)**가 WiFi 기반 온습도 센서를 제공하며, HTTP/MODBUS TCP/Telnet으로 데이터 전송이 가능하다. 식약처 주도의 스마트 HACCP 시스템도 2024년 개발 완료 예정이다.

### 통합 허브 권장 구성

**Home Assistant**가 MVP에 최적이다. 오픈소스, 로컬 제어, **5만여 종 기기 호환**, Zigbee/Z-Wave/Matter/Thread 모두 지원한다. Home Assistant Connect ZBT-2($30-40)를 허브로 사용하면 Zigbee 3.0/Thread/Matter를 단일 장치로 커버할 수 있다.

---

## 통합 관제 시스템 아키텍처 권장안

```
┌─────────────────────────────────────────────────────────────┐
│              프레젠테이션 레이어 (CareOn OS 앱)               │
│    모바일 앱 (React Native)  │  웹 대시보드 (React)          │
└─────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│                 분석/AI 레이어                               │
│  매출 분석 │ 이상탐지 │ 재고 예측 │ 영상 AI (YOLO)          │
└─────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│              데이터 통합 레이어 (Apache Kafka)               │
│  MQTT ← IoT │ REST ← POS/VAN │ RTSP ← CCTV                 │
└─────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│                 데이터 수집 레이어                           │
│  POS API │ CCTV (ONVIF) │ IoT (MQTT) │ 출입통제 (REST)      │
└─────────────────────────────────────────────────────────────┘
```

**Edge Gateway**가 핵심이다. 각 매장에 설치된 게이트웨이가 다양한 프로토콜(RS-232, TCP/IP, MQTT, ONVIF)을 **통합 포맷으로 변환**하고, 네트워크 장애 시 **로컬 버퍼링**으로 데이터 손실을 방지한다.

---

## 규제와 인증 체크리스트

### 필수 준수 사항

- **PCI-DSS v4.0**: 2024년 3월 완전 시행. 카드 데이터 취급 시 필수. 연간 거래량에 따라 Level 1(600만 건+)부터 Level 4(2만 건 미만)까지 검증 요건 상이
- **개인정보보호법 CCTV 규정**: 촬영 안내판 설치, 목적 외 사용 금지, 보관기간 제한
- **생체정보 수집 동의**: 안면인식 출입통제 시 명시적 동의 필수, 별도 암호화 저장
- **여신전문금융업법**: VAN 사업자 등록 요건 확인 필요
- **전자금융거래법**: 전자금융업 등록/신고, 이용자 보호 의무

---

## VAN사 × 디바이스 호환성 종합 매트릭스

| 카테고리 | 제조사/솔루션 | NICE | KIS | KICC | KSNET | 스마트로 | KCP | API 공개 | 연동 난이도 |
|----------|--------------|:----:|:---:|:----:|:-----:|:-------:|:---:|:--------:|:-----------:|
| **POS SW** | 페이히어 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 쉬움 |
| **POS SW** | 토스플레이스 | ✅ | ⚠️ | ✅ | ✅ | ⚠️ | ⚠️ | ⚠️ | 보통 |
| **POS HW** | 포스뱅크 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ | 보통 |
| **키오스크** | 페이히어 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 쉬움 |
| **키오스크** | 하나시스 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ | 보통 |
| **CCTV** | 한화비전 | - | - | - | - | - | - | ✅ | 쉬움 |
| **CCTV** | 아이디스 | - | - | - | - | - | - | ⚠️ | 보통 |
| **출입통제** | 슈프리마 | - | - | - | - | - | - | ✅ | 쉬움 |
| **IoT 허브** | Home Assistant | - | - | - | - | - | - | ✅ | 쉬움 |
| **조명** | Philips Hue | - | - | - | - | - | - | ✅ | 쉬움 |
| **온도센서** | 라디오노드 | - | - | - | - | - | - | ✅ | 보통 |

---

## 파트너십 우선순위 추천

### 카테고리별 1순위 파트너

| 카테고리 | 1순위 | 이유 |
|----------|-------|------|
| **POS/키오스크** | 페이히어 | 오픈 API, 프랜차이즈 통합관리 경험, 8만+ 가맹점 |
| **결제 API** | NHN KCP / 토스페이먼츠 | 개발자 문서 최고 수준, 샌드박스 환경 |
| **CCTV** | 한화비전 | Retail Insight API, 국내 기업, NDAA 준수 |
| **출입통제** | 슈프리마 | G-SDK/REST API 업계 최고, 글로벌 2위 |
| **IoT 허브** | Home Assistant | 오픈소스, 5만종 호환, Matter/Thread 지원 |
| **조명** | Philips Hue | API 문서화 우수, Matter 지원 |
| **온도 모니터링** | 라디오노드 | HACCP 준수, HTTP API 지원 |

### 2순위 대안

- POS: 토스플레이스 (하드웨어 차별화, 협의 필요)
- CCTV: 아이디스 (국내 DVR 1위, 협의 통해 연동)
- 출입통제: ZKTeco (가성비, SDK 무료)
- AI 영상분석: 딥핑소스, 메이아이 (스타트업, POS 연동 경험 보유)

---

## MVP 프로토타입 권장 범위

### Phase 1: MVP (3-6개월)

| 우선순위 | 기능 | 연동 대상 | 기대 효과 |
|:--------:|------|----------|----------|
| 1 | 통합 매출 대시보드 | 페이히어 API | 실시간 매출 모니터링 |
| 2 | CCTV 라이브뷰 + 영상 클립 | 한화비전 WAVE API | 결제 시점 ±30초 영상 자동 저장 |
| 3 | 알림 시스템 | 자체 개발 | 매출 목표, 이상 거래 감지 |

### Phase 2: 확장 (6-12개월)

| 우선순위 | 기능 | 연동 대상 |
|:--------:|------|----------|
| 4 | 키오스크 주문 데이터 | 페이히어/하나시스 |
| 5 | IoT 센서 (온습도, 전력) | Home Assistant + 라디오노드 |
| 6 | AI 영상분석 (고객 카운팅) | 한화비전 Retail Insight |

### Phase 3: 고도화 (12-18개월)

| 우선순위 | 기능 | 연동 대상 |
|:--------:|------|----------|
| 7 | 출입통제/근태 연동 | 슈프리마 BioStar 2 |
| 8 | 조명/에어컨 자동 제어 | Philips Hue + LG ThinQ |
| 9 | 예측 분석/자동화 | ML 파이프라인 |

### MVP 기술 스택

- **Frontend**: React Native (모바일), React (웹)
- **Backend**: Node.js + FastAPI + PostgreSQL
- **영상처리**: RTSP → HLS 변환 릴레이 서버
- **메시지 큐**: Apache Kafka (확장 시)
- **인증**: JWT + OAuth 2.0
- **배포**: AWS/GCP 클라우드

### 예상 개발 리소스

| 역할 | 인원 | 기간 |
|------|:----:|:----:|
| 백엔드 | 2명 | 4개월 |
| 프론트엔드/모바일 | 2명 | 4개월 |
| 인프라/DevOps | 1명 | 2개월 |
| PM/기획 | 1명 | 6개월 |

---

## 핵심 기술 허들과 해결 방안

| 허들 | 상세 | 해결 방안 |
|------|------|----------|
| **VAN 데이터 접근 제한** | DLL 기반 연동, 폐쇄적 문화 | PG사 API 활용, 포트원 통합 API |
| **레거시 시스템** | 다양한 OS, 프로토콜 혼재 | Edge Gateway + 어댑터 패턴 |
| **CCTV 폐쇄형 서비스** | 보안업체 API 미공개 | 한화비전/아이디스 선택 |
| **실시간 동기화** | 네트워크 장애 시 데이터 손실 | 로컬 버퍼링 + Event-Driven 아키텍처 |
| **BGM 통합 불가** | 모든 서비스 API 미공개 | 스마트 플러그 ON/OFF 제어 |

---

## 결론: "매장 팔란티어" 실현을 위한 3가지 핵심 전략

첫째, **플랫폼 파트너십이 VAN 직접 연동보다 효율적**이다. 페이히어, 토스플레이스 같은 기존 POS 플랫폼과 협력하면 VAN 연동 허들을 우회할 수 있다. 이들은 이미 다수 VAN사와 연동을 완료했고, API를 통해 매출 데이터 접근이 가능하다.

둘째, **표준 프로토콜(ONVIF, MQTT, Matter)을 우선 채택**해야 한다. CCTV는 ONVIF/RTSP 지원 장비(한화비전), IoT는 Matter/Thread 지원 기기를 선택하면 제조사 종속성을 최소화하고 향후 확장성을 확보할 수 있다.

셋째, **GS25/CU 편의점 사례를 벤치마킹**해야 한다. GS25는 IBM BigFix로 전국 **1만+ 점포, 2만+ POS**를 통합 관리하며, 마케팅 파일 배포 시간을 2주에서 2일로 단축했다. 이런 대규모 엔드포인트 관리 경험이 "매장 팔란티어"의 확장 단계에서 필수적이다.

팔란티어가 미군과 CIA를 위해 분산된 데이터를 통합하여 의사결정을 지원하듯, CareOn OS는 **POS, CCTV, 키오스크, 출입통제, IoT**라는 분산된 매장 데이터를 통합하여 소상공인과 프랜차이즈의 **실시간 의사결정**을 지원해야 한다. 기술적 허들은 존재하지만, 페이히어(POS), 한화비전(CCTV), 슈프리마(출입통제), Home Assistant(IoT)를 핵심 파트너로 선정하고, 표준 프로토콜 기반 Edge Gateway 아키텍처를 구축하면 **6개월 내 MVP 출시**가 충분히 가능하다.